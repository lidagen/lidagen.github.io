import{_ as t,e as p,g as s,j as e,f as o,o as c}from"./app-D5cJu0df.js";const l={},i=["src"],u=["src"],r=["src"];function k(a,n){return c(),p("div",null,[n[0]||(n[0]=s("h2",{id:"堆参数调整-以1-8-hotspot为例",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#堆参数调整-以1-8-hotspot为例"},[s("span",null,"堆参数调整 -- 以1.8 + HotSpot为例")])],-1)),n[1]||(n[1]=s("h3",{id:"jdk-7",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#jdk-7"},[s("span",null,"JDK 7")])],-1)),s("img",{src:a.$withBase("/jvm/cs1.png"),alt:"dock"},null,8,i),n[2]||(n[2]=e(" -------------------------------------------------------- ")),n[3]||(n[3]=s("h3",{id:"jdk-8",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#jdk-8"},[s("span",null,"JDK 8")])],-1)),s("img",{src:a.$withBase("/jvm/cs.png"),alt:"dock"},null,8,u),n[4]||(n[4]=o(`<ul><li>jdk8以后永久代被移除，被一个称作元空间的代替。区别在于永久代使用JVM的堆内存，<strong>元空间使用本机的物理内存。</strong><ul><li>因此默认情况下，元空间大小仅受本地内存限制，类的元数据放入本地内存，字符串池和类的常量放入java的<code>堆heap</code>中,这样可以加载多少类的元数据不再由MaxPermSize控制。</li></ul></li></ul><h3 id="堆内存调优参数" tabindex="-1"><a class="header-anchor" href="#堆内存调优参数"><span>堆内存调优参数</span></a></h3><p>参数 | 说明 |</p><ul><li>| :-: | :-: | :-: | -: -Xms | 设置初始分配大小，默认为物理内存的1/64 | -Xmx | 设置分配最大内存，默认为物理内存的1/4 | -XX:+PrintGCDetails | 输出详细的GC处理日志</li></ul><div class="hint-container tip"><p class="hint-container-title">Tips</p><p>-Xss 是调栈空间</p></div><ul><li>查看参数方法</li></ul><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code><span class="line"> <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">//java虚拟机试图使用最大内存量</span></span>
<span class="line">    <span class="token keyword">long</span> max <span class="token operator">=</span> <span class="token class-name">Runtime</span><span class="token punctuation">.</span><span class="token function">getRuntime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">maxMemory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token comment">//java虚拟机中的内存总量</span></span>
<span class="line">    <span class="token keyword">long</span> total <span class="token operator">=</span> <span class="token class-name">Runtime</span><span class="token punctuation">.</span><span class="token function">getRuntime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">totalMemory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token comment">//这个是-Xmx参数设置的内存大小</span></span>
<span class="line">    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;-Xmx -- MAX_MEMORY= &quot;</span><span class="token operator">+</span><span class="token punctuation">(</span>max<span class="token operator">/</span><span class="token punctuation">(</span><span class="token keyword">double</span><span class="token punctuation">)</span><span class="token number">1024</span><span class="token operator">/</span><span class="token number">1024</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;MB&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token comment">//这个是-Xms参数设置的内存</span></span>
<span class="line">    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;-Xm -- TOTAL_MEMORY= &quot;</span><span class="token operator">+</span><span class="token punctuation">(</span>total<span class="token operator">/</span><span class="token punctuation">(</span><span class="token keyword">double</span><span class="token punctuation">)</span><span class="token number">1024</span><span class="token operator">/</span><span class="token number">1024</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;MB&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="调整参数" tabindex="-1"><a class="header-anchor" href="#调整参数"><span>调整参数</span></a></h3><div class="hint-container tip"><p class="hint-container-title">Tips</p><p>-Xmx -Xmx 把两者设置为一致,是为了避免频繁扩容和GC释放堆内存造成的系统开销/压力</p></div><h3 id="gc收集日志信息-xx-printgcdetails" tabindex="-1"><a class="header-anchor" href="#gc收集日志信息-xx-printgcdetails"><span>GC收集日志信息 -XX:+PrintGCDetails</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code><span class="line"><span class="token punctuation">[</span>GC <span class="token punctuation">(</span>Allocation Failure<span class="token punctuation">)</span> <span class="token punctuation">[</span>PSYoungGen: 1708K-<span class="token operator">&gt;</span>504K<span class="token punctuation">(</span>2560K<span class="token punctuation">)</span><span class="token punctuation">]</span> 1708K-<span class="token operator">&gt;</span>688K<span class="token punctuation">(</span>9728K<span class="token punctuation">)</span>, <span class="token number">0.0033197</span> secs<span class="token punctuation">]</span> <span class="token punctuation">[</span>Times: <span class="token assign-left variable">user</span><span class="token operator">=</span><span class="token number">0.00</span> <span class="token assign-left variable">sys</span><span class="token operator">=</span><span class="token number">0.00</span>, <span class="token assign-left variable">real</span><span class="token operator">=</span><span class="token number">0.00</span> secs<span class="token punctuation">]</span> </span>
<span class="line"><span class="token punctuation">[</span>GC <span class="token punctuation">(</span>Allocation Failure<span class="token punctuation">)</span> <span class="token punctuation">[</span>PSYoungGen: 504K-<span class="token operator">&gt;</span>496K<span class="token punctuation">(</span>2560K<span class="token punctuation">)</span><span class="token punctuation">]</span> 688K-<span class="token operator">&gt;</span>768K<span class="token punctuation">(</span>9728K<span class="token punctuation">)</span>, <span class="token number">0.0004713</span> secs<span class="token punctuation">]</span> <span class="token punctuation">[</span>Times: <span class="token assign-left variable">user</span><span class="token operator">=</span><span class="token number">0.00</span> <span class="token assign-left variable">sys</span><span class="token operator">=</span><span class="token number">0.00</span>, <span class="token assign-left variable">real</span><span class="token operator">=</span><span class="token number">0.00</span> secs<span class="token punctuation">]</span> </span>
<span class="line"><span class="token punctuation">[</span>Full GC <span class="token punctuation">(</span>Allocation Failure<span class="token punctuation">)</span> <span class="token punctuation">[</span>PSYoungGen: 496K-<span class="token operator">&gt;</span>0K<span class="token punctuation">(</span>2560K<span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>ParOldGen: 272K-<span class="token operator">&gt;</span>619K<span class="token punctuation">(</span>7168K<span class="token punctuation">)</span><span class="token punctuation">]</span> 768K-<span class="token operator">&gt;</span>619K<span class="token punctuation">(</span>9728K<span class="token punctuation">)</span>, <span class="token punctuation">[</span>Metaspace: 3290K-<span class="token operator">&gt;</span>3290K<span class="token punctuation">(</span>1056768K<span class="token punctuation">)</span><span class="token punctuation">]</span>, <span class="token number">0.0040743</span> secs<span class="token punctuation">]</span> <span class="token punctuation">[</span>Times: <span class="token assign-left variable">user</span><span class="token operator">=</span><span class="token number">0.00</span> <span class="token assign-left variable">sys</span><span class="token operator">=</span><span class="token number">0.00</span>, <span class="token assign-left variable">real</span><span class="token operator">=</span><span class="token number">0.00</span> secs<span class="token punctuation">]</span> </span>
<span class="line"><span class="token punctuation">[</span>GC <span class="token punctuation">(</span>Allocation Failure<span class="token punctuation">)</span> <span class="token punctuation">[</span>PSYoungGen: 0K-<span class="token operator">&gt;</span>0K<span class="token punctuation">(</span>2560K<span class="token punctuation">)</span><span class="token punctuation">]</span> 619K-<span class="token operator">&gt;</span>619K<span class="token punctuation">(</span>9728K<span class="token punctuation">)</span>, <span class="token number">0.0001987</span> secs<span class="token punctuation">]</span> <span class="token punctuation">[</span>Times: <span class="token assign-left variable">user</span><span class="token operator">=</span><span class="token number">0.00</span> <span class="token assign-left variable">sys</span><span class="token operator">=</span><span class="token number">0.00</span>, <span class="token assign-left variable">real</span><span class="token operator">=</span><span class="token number">0.00</span> secs<span class="token punctuation">]</span> </span>
<span class="line"><span class="token punctuation">[</span>Full GC <span class="token punctuation">(</span>Allocation Failure<span class="token punctuation">)</span> <span class="token punctuation">[</span>PSYoungGen: 0K-<span class="token operator">&gt;</span>0K<span class="token punctuation">(</span>2560K<span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>ParOldGen: 619K-<span class="token operator">&gt;</span>601K<span class="token punctuation">(</span>7168K<span class="token punctuation">)</span><span class="token punctuation">]</span> 619K-<span class="token operator">&gt;</span>601K<span class="token punctuation">(</span>9728K<span class="token punctuation">)</span>, <span class="token punctuation">[</span>Metaspace: 3290K-<span class="token operator">&gt;</span>3290K<span class="token punctuation">(</span>1056768K<span class="token punctuation">)</span><span class="token punctuation">]</span>, <span class="token number">0.0039539</span> secs<span class="token punctuation">]</span> <span class="token punctuation">[</span>Times: <span class="token assign-left variable">user</span><span class="token operator">=</span><span class="token number">0.00</span> <span class="token assign-left variable">sys</span><span class="token operator">=</span><span class="token number">0.00</span>, <span class="token assign-left variable">real</span><span class="token operator">=</span><span class="token number">0.00</span> secs<span class="token punctuation">]</span> </span>
<span class="line">Heap</span>
<span class="line"> PSYoungGen      total 2560K, used 56K <span class="token punctuation">[</span>0x00000000ffd00000, 0x0000000100000000, 0x0000000100000000<span class="token punctuation">)</span></span>
<span class="line">  eden space 2048K, <span class="token number">2</span>% used <span class="token punctuation">[</span>0x00000000ffd00000,0x00000000ffd0e348,0x00000000fff00000<span class="token punctuation">)</span></span>
<span class="line">  from space 512K, <span class="token number">0</span>% used <span class="token punctuation">[</span>0x00000000fff00000,0x00000000fff00000,0x00000000fff80000<span class="token punctuation">)</span></span>
<span class="line">  to   space 512K, <span class="token number">0</span>% used <span class="token punctuation">[</span>0x00000000fff80000,0x00000000fff80000,0x0000000100000000<span class="token punctuation">)</span></span>
<span class="line"> ParOldGen       total 7168K, used 601K <span class="token punctuation">[</span>0x00000000ff600000, 0x00000000ffd00000, 0x00000000ffd00000<span class="token punctuation">)</span></span>
<span class="line">  object space 7168K, <span class="token number">8</span>% used <span class="token punctuation">[</span>0x00000000ff600000,0x00000000ff696620,0x00000000ffd00000<span class="token punctuation">)</span></span>
<span class="line"> Metaspace       used 3322K, capacity 4496K, committed 4864K, reserved 1056768K</span>
<span class="line">  class space    used 362K, capacity 388K, committed 512K, reserved 1048576K</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,11)),s("img",{src:a.$withBase("/jvm/gcDetails.png"),alt:"dock"},null,8,r)])}const d=t(l,[["render",k],["__file","jvm2.html.vue"]]),b=JSON.parse('{"path":"/jvm/jvm2.html","title":"","lang":"en-US","frontmatter":{},"headers":[{"level":2,"title":"堆参数调整 -- 以1.8 + HotSpot为例","slug":"堆参数调整-以1-8-hotspot为例","link":"#堆参数调整-以1-8-hotspot为例","children":[{"level":3,"title":"JDK 7","slug":"jdk-7","link":"#jdk-7","children":[]},{"level":3,"title":"JDK 8","slug":"jdk-8","link":"#jdk-8","children":[]},{"level":3,"title":"堆内存调优参数","slug":"堆内存调优参数","link":"#堆内存调优参数","children":[]},{"level":3,"title":"调整参数","slug":"调整参数","link":"#调整参数","children":[]},{"level":3,"title":"GC收集日志信息 -XX:+PrintGCDetails","slug":"gc收集日志信息-xx-printgcdetails","link":"#gc收集日志信息-xx-printgcdetails","children":[]}]}],"git":{"updatedTime":1629293548000,"contributors":[{"name":"gendali","username":"gendali","email":"wal365@126.com","commits":1,"url":"https://github.com/gendali"},{"name":"wal365@126.com","username":"wal365@126.com","email":"github73256897","commits":8,"url":"https://github.com/wal365@126.com"}],"changelog":[{"hash":"c4e035070c63eea642d2f368c64b0dce4b4d6001","time":1629293548000,"email":"github73256897","author":"wal365@126.com","message":"commit vueblog"},{"hash":"4c198b044d16cbee1f248c311de9a429460dc5c4","time":1629099631000,"email":"github73256897","author":"wal365@126.com","message":"commit vueblog"},{"hash":"d12ff3e596e61dd1702c10a6a0e137c971aebc09","time":1629083175000,"email":"github73256897","author":"wal365@126.com","message":"commit vueblog"},{"hash":"e79761e3ddaed1c28acede4c350d7b87b07d8665","time":1629082235000,"email":"github73256897","author":"wal365@126.com","message":"commit vueblog"},{"hash":"75b9459fe0984eb2a324e91d22fdf79f60f2a823","time":1629039393000,"email":"github73256897","author":"wal365@126.com","message":"commit vueblog"},{"hash":"3505693e681dcfdebae65ccecd6f2ba5a6bcb402","time":1629038765000,"email":"github73256897","author":"wal365@126.com","message":"commit vueblog"},{"hash":"ca5068439caf793d4211483e837b66af52459830","time":1629038562000,"email":"github73256897","author":"wal365@126.com","message":"commit vueblog"},{"hash":"fe02200ddc3af36c8a33f1778822ab49b264ceae","time":1629026808000,"email":"github73256897","author":"wal365@126.com","message":"commit vueblog"},{"hash":"2b8f1d20b0e638eaf7bde6d951e658db1862f159","time":1587282374000,"email":"wal365@126.com","author":"gendali","message":"cimmit jvm"}]},"filePathRelative":"jvm/jvm2.md"}');export{d as comp,b as data};
